MP2COD 3.80, COFF to COD File Converter
Copyright (c) 2004 Microchip Technology Inc.
Listing File Generated: Sun Nov 20 18:21:11 2005


Address  Value    Disassembly              Source                                                                           File
-------  -------  -----------------------  -------------------------------------------------------------------------------  -----
                                           ;        TITLE "Dallas 1 wire bus comms MASTER"                                  E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*                                                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*   Send Reset Pulse to all on Dallas bus,                                      E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*   and monitor presence pulse                                                  E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;* TO DO -  best of three reads, to guard against noise                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*                                                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                               include P16F628A.inc                                                         E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                   LIST                                                                     C:\Program Files\MPLAB\MCHIP_Tools\P16F628A.inc
                                           ; P16F628A.INC  Standard Header File, Version 1.10    Microchip Technology, Inc. C:\Program Files\MPLAB\MCHIP_Tools\P16F628A.inc
                                                   LIST                                                                     C:\Program Files\MPLAB\MCHIP_Tools\P16F628A.inc
                                               include tempdemo.inc                                                         E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ;*                                                                          *    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ;*                   Dallas 1 Wire Bus Temperature demo                     *    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ;*                                                                          *    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           Clock_Freq      equ     d'4000000'      ;4MHz - for wait macro calculations      E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                               udata_ovr   0x20                    ;0x0C 16F84                              E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           DScommbuff      res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           DSCRC           res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           tempone         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           temptwo         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           count           res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           count2          res     1               ; 2nd loop counter for nested loops      E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           bits_byte       res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           CHARBUF         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           temp_hi         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           temp_lo         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           acc_lo          res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           acc_hi          res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           vvshift         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define PRESENCE_bit    bits_byte, 0                                             E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define round00_bit     bits_byte, 1                                             E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define DSNext_bit      bits_byte, 2                                             E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define neg_temp_bit    bits_byte, 3                                             E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define DALLAS_BUS      PORTA, 4                                                 E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ROM_no          res     8                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           id_bit_number   res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           last_zero       res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           LastDiscrepancy res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           LastFamilyDiscr res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           id_bits_byte    res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           rom_mask        res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define id_bit          id_bits_byte, 0 ; first bit read in a search ID sequence E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define cmp_id_bit      id_bits_byte, 1 ; complement of id_bit                   E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define test_bit        id_bits_byte, 2 ; test id_bit & cmp_id_bit               E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define last_device     id_bits_byte, 6                                          E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define Direction       id_bits_byte, 7                                          E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                               include dal_bus.inc                                                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                   list                                                                     E:\prjPIC\prj_DS1820\searchV03\dal_bus.inc
                                               include wait.inc                                                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           #define         Nanosec         * D'1'                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           #define         Microsec        * D'1000'                                        E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           #define         Millisec        * D'1000000'                                     E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           #define         Seconds         * D'1000000000'                                  E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;**************************************************************                  E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;*                       The WAIT macro                       *                  E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;*                      * VERSION 1.01 *                      *                  E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;*             called by Wait <time>, lesscycles              *                  E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;**************************************************************                  E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;History                                                                         E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;1.00   - Original                                                               E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;1.01   - Fixed bug with small even numbers giving an error message              E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           Wait    macro   time_ns, lesscycles         ;time_ns gives the wait time required, in ns E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            radix dec                                                                       E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            variable instruct_time_ns =  (( 1 Seconds ) / (Clock_Freq / 4 ))                E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            local cycles                                                                    E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            variable cycles = ((time_ns) / instruct_time_ns)   ;required delay in           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                    ;100ths of instructions E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if (cycles < (lesscycles) )                                                     E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                   messg NOTE - negative delay time with lesscycles cycles (no code)        E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                           exitm                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            else                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            variable cycles = (cycles - (lesscycles))                                       E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if (cycles == 0)                                                                E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                   messg "WARNING - delay time less than 1 instructions"                    E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                           nop                                                              E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                           exitm                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if (cycles > (255*(256*3 + 6) + 2 + 3))                                         E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                   messg   "ERROR : Too long a wait for the WAIT macro at present!!"        E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                   exitm                                                                    E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;        messg Info - calculated number of cycles = #v(cycles)                   E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if (cycles > ((255*3)+5))                                                       E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                           movlw   ((cycles-5)/(256*3+6))                                   E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                           call    longdelay                                                E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            ifndef INCLONGDELAY                                                             E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                             #define INCLONGDELAY                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            exitm                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if ((cycles > 8 ) && (cycles < (255*3 + 5)))                                    E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
00004b   30bf     MOVLW     0xbf                           movlw   ((cycles-5)/3)                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
00004e   3012     MOVLW     0x12                                                                                            
000052   308a     MOVLW     0x8a                                                                                            
00005a   3012     MOVLW     0x12                                                                                            
000060   3012     MOVLW     0x12                                                                                            
00006d   3011     MOVLW     0x11                                                                                            
000079   3001     MOVLW     0x1                                                                                             
00007e   300e     MOVLW     0xe                                                                                             
000087   3001     MOVLW     0x1                                                                                             
000099   300a     MOVLW     0xa                                                                                             
00004c   210d     CALL      0x10d                          call    shortdelay                                               E:\prjPIC\prj_DS1820\searchV03\wait.inc
00004f   210d     CALL      0x10d                                                                                           
000053   210d     CALL      0x10d                                                                                           
00005b   210d     CALL      0x10d                                                                                           
000061   210d     CALL      0x10d                                                                                           
00006e   210d     CALL      0x10d                                                                                           
00007a   210d     CALL      0x10d                                                                                           
00007f   210d     CALL      0x10d                                                                                           
000088   210d     CALL      0x10d                                                                                           
00009a   210d     CALL      0x10d                                                                                           
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            ifndef INCSHORTDELAY                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                             #define INCSHORTDELAY                                                          E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            exitm                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if (cycles < 8)                                                                 E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            while  ( cycles > 1 )                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
000058   2859     GOTO      0x59                           goto $+1  ;two cycle nop                                         E:\prjPIC\prj_DS1820\searchV03\wait.inc
000077   2878     GOTO      0x78                                                                                            
000085   2886     GOTO      0x86                                                                                            
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           cycles -=2                                                                       E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endw                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if (cycles > 0)                                                                 E:\prjPIC\prj_DS1820\searchV03\wait.inc
000049   0000     NOP                                     nop                                                               E:\prjPIC\prj_DS1820\searchV03\wait.inc
000063   0000     NOP                                                                                                       
00006a   0000     NOP                                                                                                       
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            exitm                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            messg "ERROR - got to end of WAIT.MAC"                                          E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            radix hex                                                                       E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endm                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                               global DSReset_Pulse, DSWriteByteW, DSReadByte, DSReadBit                    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                               global OWSearch                                                              E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                               extern longdelay, shortdelay    ;DELAY.ASM                                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           PROG CODE                                                                        E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000047   1026     BCF       0x26,0x0       DSReset_Pulse   bcf     PRESENCE_bit                                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000048   1605     BSF       0x5,0x4                        bsf     DALLAS_BUS      ;just in case it isn't                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           Wait    1 Microsec,0    ; Trec                                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00004a   1205     BCF       0x5,0x4                        bcf     DALLAS_BUS      ;start of reset pulse                    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           Wait    580 Microsec,0  ; Trstl                                  E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00004d   1605     BSF       0x5,0x4                        bsf     DALLAS_BUS      ;end of reset pulse                      E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           Wait    60 Microsec,0   ; Tpdh                                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000050   1e05     BTFSS     0x5,0x4                        btfss   DALLAS_BUS      ;check for a presence pulse st:btfsC     E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000051   1426     BSF       0x26,0x0                       bsf     PRESENCE_bit    ;indicates presence                      E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           Wait    420 Microsec,0  ; Trsth - Tpdh ( > Tpdl)                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000054   0008     RETURN                                   return                                                           E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*                                                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*   Write a ONE on the Dallas bus                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*                                                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000055   1605     BSF       0x5,0x4        DSWriteaOne     bsf     DALLAS_BUS      ;just in case it isn't                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000056   0000     NOP                                      nop                                                              E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000057   1205     BCF       0x5,0x4                        bcf     DALLAS_BUS      ;start/sync edge                         E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           Wait    2 Microsec,0    ; Tlow1                                  E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000059   1605     BSF       0x5,0x4                        bsf     DALLAS_BUS      ;end of low pulse                        E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           Wait    59 Microsec,0   ; (Tslot + Trec) - Tlow1                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00005c   0008     RETURN                                   return                                                           E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*                                                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*   Write a ZERO on the Dallas bus                                              E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*                                                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00005d   1605     BSF       0x5,0x4        DSWriteaZero    bsf     DALLAS_BUS      ;just in case it isn't                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00005e   0000     NOP                                      nop                                                              E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00005f   1205     BCF       0x5,0x4                        bcf     DALLAS_BUS      ;start/sync edge                         E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           Wait    60 Microsec,0   ; Tlow0                                  E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000062   1605     BSF       0x5,0x4                        bsf     DALLAS_BUS      ;end of low pulse                        E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           Wait    1 Microsec,0    ; Trec                                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000064   0008     RETURN                                   return                                                           E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*                                                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*   Write byte in DScommbuff or W to the Dallas bus                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*                                                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000065   00a0     MOVWF     0x20           DSWriteByteW    movwf   DScommbuff      ;store W                                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000066   1605     BSF       0x5,0x4        DSWriteByte     bsf     DALLAS_BUS      ;just in case it isn't                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000067   3008     MOVLW     0x8                            movlw   0x08            ;byte is 8 bits                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000068   00a4     MOVWF     0x24                           movwf   count                                                    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000069   1205     BCF       0x5,0x4        DSWriteLoop     bcf     DALLAS_BUS      ;start/sync edge                         E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           Wait    2 Microsec,1    ; Tlow1                                  E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00006b   1820     BTFSC     0x20,0x0                       btfsc   DScommbuff, 0                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00006c   1605     BSF       0x5,0x4                         bsf    DALLAS_BUS      ;end of low pulse if bit was a 1         E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           Wait    58 Microsec,0   ; (Tslot + Trec) - Tlow1                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00006f   1605     BSF       0x5,0x4                        bsf     DALLAS_BUS      ;end of low pulse if 0 (1 no change)     E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           Wait    1 Microsec,4    ; Trec                                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000070   0ca0     RRF       0x20,0x1                       rrf     DScommbuff, F                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000071   0ba4     DECFSZ    0x24,0x1                       decfsz  count, F                                                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000072   2869     GOTO      0x69                           goto    DSWriteLoop                                              E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000073   0008     RETURN                                   return                                                           E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*                                                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*   Read bit from the Dallas bus - puts it is bit 0 of DScommbuff               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;* TO DO -  best of three reads, to guard against noise                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*                                                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000074   1605     BSF       0x5,0x4        DSReadBit       bsf     DALLAS_BUS      ;just in case it isn't                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000075   0000     NOP                                      nop                                                              E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000076   1205     BCF       0x5,0x4                        bcf     DALLAS_BUS      ;start/sync edge                         E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           Wait    2 Microsec,0    ; Tlowr                                  E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000078   1605     BSF       0x5,0x4                        bsf     DALLAS_BUS      ;end of sync low pulse                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           Wait    12 Microsec, 2  ; Trdv - 2 cycles                        E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00007b   1420     BSF       0x20,0x0                       bsf     DScommbuff,0                                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00007c   1e05     BTFSS     0x5,0x4                        btfss   DALLAS_BUS                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00007d   1020     BCF       0x20,0x0                       bcf     DScommbuff, 0                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           Wait    47 Microsec, 0                                           E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000080   0008     RETURN                                   return                                                           E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*                                                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*   Read byte from the Dallas bus, and update CRC                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;* TO DO -  best of three reads, to guard against noise                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;*                                                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000081   1605     BSF       0x5,0x4        DSReadByte      bsf     DALLAS_BUS      ;just in case it isn't                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000082   3008     MOVLW     0x8                            movlw   0x08            ;byte is 8 bits                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000083   00a4     MOVWF     0x24                           movwf   count                                                    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000084   1205     BCF       0x5,0x4        DSReadLoop      bcf     DALLAS_BUS      ;start/sync edge                         E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           Wait    2 Microsec,0    ; Tlowr                                  E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000086   1605     BSF       0x5,0x4                        bsf     DALLAS_BUS      ;end of sync low pulse                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           Wait    12 Microsec, 3  ; Trdv - 2 cycles                        E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000089   1003     BCF       0x3,0x0                        bcf     STATUS, C                                                E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00008a   0103     CLRW                                     clrw                                                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00008b   1e05     BTFSS     0x5,0x4                        btfss   DALLAS_BUS                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00008c   288f     GOTO      0x8f                            goto   DSread0                                                  E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00008d   3001     MOVLW     0x1                            movlw   b'00000001'                                              E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00008e   1403     BSF       0x3,0x0                        bsf     STATUS, C                                                E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           DSread0                                                                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00008f   0ca0     RRF       0x20,0x1                       rrf     DScommbuff, F                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;now for the calculating the CRC                                                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000090   1003     BCF       0x3,0x0                        bcf     STATUS, C                                                E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000091   0621     XORWF     0x21,0x0                       xorwf   DSCRC, W                                                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000092   3901     ANDLW     0x1                            andlw   b'00000001'                                              E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000093   1903     BTFSC     0x3,0x2                        btfsc   STATUS, Z   ;changed from btfss 080298****               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000094   2898     GOTO      0x98                            goto   DSCRCin0                                                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000095   3018     MOVLW     0x18                           movlw   0x18                                                     E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000096   06a1     XORWF     0x21,0x1                       xorwf   DSCRC, F                                                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000097   1403     BSF       0x3,0x0                        bsf     STATUS, C   ;added here 080298*****                      E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000098   0ca1     RRF       0x21,0x1       DSCRCin0        rrf     DSCRC, F                                                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           Wait    47 Microsec, 12                                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00009b   0ba4     DECFSZ    0x24,0x1                       decfsz  count, F    ;end of byte?                                E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00009c   2884     GOTO      0x84                            goto   DSReadLoop                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00009d   0008     RETURN                                   return                                                           E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           OWSearch                                                                         E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00009e   01b5     CLRF      0x35               clrf    id_bit_number   ; set id_bit_number = 1                              E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
00009f   0ab5     INCF      0x35,0x1           incf    id_bit_number, F                                                     E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000a0   01b6     CLRF      0x36               clrf    last_zero       ; set last_zero = 0                                  E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000a1   01ba     CLRF      0x3a               clrf    rom_mask        ; set rom_mask = 1                                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000a2   0aba     INCF      0x3a,0x1           incf    rom_mask, F                                                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000a3   01a1     CLRF      0x21               clrf    DSCRC           ; reset CRC check                                    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000a4   302d     MOVLW     0x2d               movlw   ROM_no                                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000a5   0084     MOVWF     0x4                movwf   FSR                                                                  E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000a6   30f0     MOVLW     0xf0               movlw   DSSearchROM                                                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ;    movlw   DSAlarmSearch                                                       E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000a7   2065     CALL      0x65               call    DSWriteByteW                                                         E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ReadBit                     ; read id_bit & cmp_id_bit                           E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000a8   2074     CALL      0x74               call    DSReadBit                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000a9   1039     BCF       0x39,0x0           bcf     id_bit                                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000aa   1820     BTFSC     0x20,0x0           btfsc   DScommbuff, 0                                                        E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000ab   1439     BSF       0x39,0x0            bsf    id_bit                                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000ac   2074     CALL      0x74               call    DSReadBit                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000ad   10b9     BCF       0x39,0x1           bcf     cmp_id_bit                                                           E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000ae   1820     BTFSC     0x20,0x0           btfsc   DScommbuff, 0                                                        E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000af   14b9     BSF       0x39,0x1            bsf    cmp_id_bit                                                           E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; check for no devices on 1-wire, id_bit = cmp_id_bit = 1?                       E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000b0   1539     BSF       0x39,0x2           bsf     test_bit                                                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000b1   1c39     BTFSS     0x39,0x0           btfss   id_bit                                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000b2   1139     BCF       0x39,0x2            bcf    test_bit                                                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000b3   1cb9     BTFSS     0x39,0x1           btfss   cmp_id_bit                                                           E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000b4   1139     BCF       0x39,0x2            bcf    test_bit                                                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; no devices on 1-wire bus, loop                                                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000b5   1939     BTFSC     0x39,0x2            btfsc  test_bit                                                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000b6   2905     GOTO      0x105                goto  OWSearchErr                                                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; Discrepancy?, id_bit = cmp_id_bit = 0?                                         E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000b7   1139     BCF       0x39,0x2           bcf     test_bit                                                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000b8   1839     BTFSC     0x39,0x0           btfsc   id_bit                                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000b9   1539     BSF       0x39,0x2            bsf    test_bit        ; No discrepancy                                     E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000ba   18b9     BTFSC     0x39,0x1           btfsc   cmp_id_bit                                                           E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000bb   1539     BSF       0x39,0x2            bsf    test_bit        ; No discrepancy                                     E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000bc   1d39     BTFSS     0x39,0x2           btfss   test_bit                                                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000bd   28c2     GOTO      0xc2                goto   discrepancy     ; Yes, discrepancy                                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; No, no discrepancy -> Direction = id_bit                                       E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000be   13b9     BCF       0x39,0x7           bcf     Direction                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000bf   1839     BTFSC     0x39,0x0           btfsc   id_bit                                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000c0   17b9     BSF       0x39,0x7            bsf    Direction                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000c1   28da     GOTO      0xda               goto    EndDiscrepancy                                                       E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           discrepancy                                                                      E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; id_bit_number = LastDiscrepancy?                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000c2   0837     MOVF      0x37,0x0           movf    LastDiscrepancy, W                                                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000c3   0235     SUBWF     0x35,0x0           subwf   id_bit_number, W                                                     E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000c4   1d03     BTFSS     0x3,0x2            btfss   STATUS, Z                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000c5   28c8     GOTO      0xc8                goto   $ + 3           ; No                                                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000c6   17b9     BSF       0x39,0x7           bsf     Direction       ; Yes                                                E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000c7   28d1     GOTO      0xd1               goto    EndEqual                                                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; id_bit_number > LastDiscrepancy?                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000c8   1c03     BTFSS     0x3,0x0            btfss   STATUS, C                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000c9   28cc     GOTO      0xcc                goto   $ + 3           ; No                                                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000ca   13b9     BCF       0x39,0x7           bcf     Direction       ; Yes                                                E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000cb   28d1     GOTO      0xd1               goto    EndEqual                                                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; No, id_bit_number !> LastDiscrepancy                                           E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; Direction = ROM_no, id_bit_number                                              E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000cc   13b9     BCF       0x39,0x7           bcf     Direction ; optimizable!                                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000cd   083a     MOVF      0x3a,0x0           movf    rom_mask, W                                                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000ce   0500     ANDWF     0x0,0x0            andwf   INDF, W                                                              E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000cf   1d03     BTFSS     0x3,0x2            btfss   STATUS, Z                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000d0   17b9     BSF       0x39,0x7            bsf    Direction                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           EndEqual                                                                         E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; Direction = 0?                                                                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000d1   1bb9     BTFSC     0x39,0x7           btfsc   Direction                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000d2   28da     GOTO      0xda                goto   EndDiscrepancy      ; No                                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; Yes, last_zero = id_bit_number                                                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000d3   0835     MOVF      0x35,0x0           movf    id_bit_number, W    ; Yes                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000d4   00b6     MOVWF     0x36               movwf   last_zero                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; (9 - last_zero > 0)?, last_zero < 9?                                           E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000d5   3c09     SUBLW     0x9                sublw   d'9'                                                                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000d6   1c03     BTFSS     0x3,0x0            btfss   STATUS, C                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000d7   28da     GOTO      0xda                goto   EndDiscrepancy  ; No                                                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; Yes, LastFamilyDiscr = last_zero                                               E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000d8   0836     MOVF      0x36,0x0           movf    last_zero, W    ; Yes                                                E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000d9   00b8     MOVWF     0x38               movwf   LastFamilyDiscr                                                      E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           EndDiscrepancy                                                                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; ROM_no, id_bit_number = Direction                                              E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000da   1bb9     BTFSC     0x39,0x7           btfsc   Direction                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000db   28e0     GOTO      0xe0                goto   $ + 5                                                                E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; Direction = 0                                                                  E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000dc   093a     COMF      0x3a,0x0           comf    rom_mask, W                                                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000dd   0580     ANDWF     0x0,0x1            andwf   INDF, F                                                              E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000de   205d     CALL      0x5d               call    DSWriteaZero    ; send Direction bit over 1-wire bus                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000df   28e3     GOTO      0xe3               goto    $ + 4                                                                E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; Direction = 1                                                                  E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000e0   083a     MOVF      0x3a,0x0           movf    rom_mask, W                                                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000e1   0480     IORWF     0x0,0x1            iorwf   INDF, F                                                              E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000e2   2055     CALL      0x55               call    DSWriteaOne     ; send Direction bit over 1-wire bus                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000e3   0ab5     INCF      0x35,0x1           incf    id_bit_number, F                                                     E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000e4   1003     BCF       0x3,0x0            bcf     STATUS, C       ; needed!                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000e5   0dba     RLF       0x3a,0x1           rlf     rom_mask, F                                                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; End of byte?                                                                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000e6   08ba     MOVF      0x3a,0x1           movf    rom_mask, F                                                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000e7   1d03     BTFSS     0x3,0x2            btfss   STATUS, Z                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000e8   28eb     GOTO      0xeb                goto   $ + 3           ; No                                                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000e9   0a84     INCF      0x4,0x1            incf    FSR, F          ; Yes, end of byte                                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000ea   0aba     INCF      0x3a,0x1           incf    rom_mask, F                                                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; CRC update                                                                     E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000eb   0103     CLRW                         clrw                                                                         E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000ec   1fb9     BTFSS     0x39,0x7           btfss   Direction                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000ed   28ef     GOTO      0xef                goto   read0                                                                E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000ee   3001     MOVLW     0x1                movlw   b'00000001'                                                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           read0                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000ef   1003     BCF       0x3,0x0            bcf     STATUS, C                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000f0   0621     XORWF     0x21,0x0           xorwf   DSCRC, W                                                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000f1   3901     ANDLW     0x1                andlw   b'00000001'                                                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000f2   1903     BTFSC     0x3,0x2            btfsc   STATUS, Z                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000f3   28f7     GOTO      0xf7                goto   in0                                                                  E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000f4   3018     MOVLW     0x18               movlw   0x18                                                                 E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000f5   06a1     XORWF     0x21,0x1           xorwf   DSCRC, F                                                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000f6   1403     BSF       0x3,0x0            bsf     STATUS, C                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           in0                                                                              E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000f7   0ca1     RRF       0x21,0x1           rrf     DSCRC, F                                                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; id_bit_number = 65?                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000f8   0835     MOVF      0x35,0x0           movf    id_bit_number, W                                                     E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000f9   3ebf     ADDLW     0xbf               addlw   (0 - .65)                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000fa   1d03     BTFSS     0x3,0x2            btfss   STATUS, Z                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000fb   28a8     GOTO      0xa8                goto   ReadBit                                                              E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; LastDiscrepancy = last_zero                                                    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000fc   0836     MOVF      0x36,0x0           movf    last_zero, W                                                         E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000fd   00b7     MOVWF     0x37               movwf   LastDiscrepancy                                                      E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; LastDiscrepancy = 0 - check for last device                                    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000fe   08b7     MOVF      0x37,0x1           movf    LastDiscrepancy, F                                                   E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
0000ff   1903     BTFSC     0x3,0x2            btfsc   STATUS, Z                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000100   1739     BSF       0x39,0x6            bsf    last_device     ; Yes, set last_device flag                          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           ; check the CRC                                                                  E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000101   08a1     MOVF      0x21,0x1           movf    DSCRC, F                                                             E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000102   1d03     BTFSS     0x3,0x2            btfss   STATUS, Z                                                            E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000103   2905     GOTO      0x105               goto   OWSearchErr     ; Not successful search, reset search state          E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000104   3400     RETLW     0x0                retlw   00 ; EXIT_SUCCESS                                                    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                           OWSearchErr                                                                      E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
000105   3401     RETLW     0x1                retlw   01 ; EXIT_FAILURE                                                    E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           end                                                              E:\prjPIC\prj_DS1820\searchV03\Dal_bus.asm
                                                           ;**********************************                              E:\prjPIC\prj_DS1820\searchV03\Delay.asm
                                                           ;*    The Delay routines          *                              E:\prjPIC\prj_DS1820\searchV03\Delay.asm
                                                           ;*                                *                              E:\prjPIC\prj_DS1820\searchV03\Delay.asm
                                                           ;* used by Wait <time>            *                              E:\prjPIC\prj_DS1820\searchV03\Delay.asm
                                                           ;**********************************                              E:\prjPIC\prj_DS1820\searchV03\Delay.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Delay.asm
                                               include tempdemo.inc                                                         E:\prjPIC\prj_DS1820\searchV03\Delay.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ;*                                                                          *    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ;*                   Dallas 1 Wire Bus Temperature demo                     *    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ;*                                                                          *    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           Clock_Freq      equ     d'4000000'      ;4MHz - for wait macro calculations      E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                               udata_ovr   0x20                    ;0x0C 16F84                              E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           DScommbuff      res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           DSCRC           res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           tempone         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           temptwo         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           count           res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           count2          res     1               ; 2nd loop counter for nested loops      E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           bits_byte       res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           CHARBUF         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           temp_hi         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           temp_lo         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           acc_lo          res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           acc_hi          res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           vvshift         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define PRESENCE_bit    bits_byte, 0                                             E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define round00_bit     bits_byte, 1                                             E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define DSNext_bit      bits_byte, 2                                             E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define neg_temp_bit    bits_byte, 3                                             E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define DALLAS_BUS      PORTA, 4                                                 E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ROM_no          res     8                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           id_bit_number   res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           last_zero       res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           LastDiscrepancy res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           LastFamilyDiscr res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           id_bits_byte    res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           rom_mask        res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define id_bit          id_bits_byte, 0 ; first bit read in a search ID sequence E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define cmp_id_bit      id_bits_byte, 1 ; complement of id_bit                   E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define test_bit        id_bits_byte, 2 ; test id_bit & cmp_id_bit               E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define last_device     id_bits_byte, 6                                          E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define Direction       id_bits_byte, 7                                          E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Delay.asm
                                               global longdelay, shortdelay                                                 E:\prjPIC\prj_DS1820\searchV03\Delay.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Delay.asm
                                           PROG CODE                                                                        E:\prjPIC\prj_DS1820\searchV03\Delay.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Delay.asm
000106   00a2     MOVWF     0x22           longdelay   movwf   tempone                                                      E:\prjPIC\prj_DS1820\searchV03\Delay.asm
000107   01a3     CLRF      0x23           ldloop1     clrf    temptwo                                                      E:\prjPIC\prj_DS1820\searchV03\Delay.asm
000108   0ba3     DECFSZ    0x23,0x1       ldloop2     decfsz  temptwo, F  ;becomes 11111111                                E:\prjPIC\prj_DS1820\searchV03\Delay.asm
000109   2908     GOTO      0x108                      goto    ldloop2                                                      E:\prjPIC\prj_DS1820\searchV03\Delay.asm
00010a   0ba2     DECFSZ    0x22,0x1                   decfsz  tempone, F                                                   E:\prjPIC\prj_DS1820\searchV03\Delay.asm
00010b   2907     GOTO      0x107                      goto    ldloop1                                                      E:\prjPIC\prj_DS1820\searchV03\Delay.asm
00010c   0008     RETURN                               return                                                               E:\prjPIC\prj_DS1820\searchV03\Delay.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Delay.asm
00010d   00a2     MOVWF     0x22           shortdelay  movwf   tempone                                                      E:\prjPIC\prj_DS1820\searchV03\Delay.asm
00010e   0ba2     DECFSZ    0x22,0x1       sdloop      decfsz  tempone, F                                                   E:\prjPIC\prj_DS1820\searchV03\Delay.asm
00010f   290e     GOTO      0x10e                      goto    sdloop                                                       E:\prjPIC\prj_DS1820\searchV03\Delay.asm
000110   0008     RETURN                               return                                                               E:\prjPIC\prj_DS1820\searchV03\Delay.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Delay.asm
                                                   end                                                                      E:\prjPIC\prj_DS1820\searchV03\Delay.asm
                                           ;                                                                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ; This program interfaces to a Hitachi (LM032L) 2 line by 20 character display   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ; module. The program assembles for 4-bit data interface. LCD_DATA is the port   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ; which supplies the data and LCD_CTRL the control lines ( E, RS, R_W ) to the   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ; LM032L.                                                                        E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ; This program only handles the data though the high nibble.                     E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;* This file and the resulting compiled code copyright1993-96 Steve Lawther *    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*      Use of any of this code requires Steve Lawther to have a credit     *    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*        within the source code. Commercial use of any of this code        *    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*           requires the permission of the author, Steve Lawther           *    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*   For more details read 'README.TXT' or email steve.lawther@gecm.com     *    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               include P16F628A.inc                                                         E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                   LIST                                                                     C:\Program Files\MPLAB\MCHIP_Tools\P16F628A.inc
                                           ; P16F628A.INC  Standard Header File, Version 1.10    Microchip Technology, Inc. C:\Program Files\MPLAB\MCHIP_Tools\P16F628A.inc
                                                   LIST                                                                     C:\Program Files\MPLAB\MCHIP_Tools\P16F628A.inc
                                               include tempdemo.inc                                                         E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ;*                                                                          *    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ;*                   Dallas 1 Wire Bus Temperature demo                     *    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ;*                                                                          *    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           Clock_Freq      equ     d'4000000'      ;4MHz - for wait macro calculations      E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                               udata_ovr   0x20                    ;0x0C 16F84                              E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           DScommbuff      res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           DSCRC           res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           tempone         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           temptwo         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           count           res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           count2          res     1               ; 2nd loop counter for nested loops      E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           bits_byte       res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           CHARBUF         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           temp_hi         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           temp_lo         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           acc_lo          res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           acc_hi          res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           vvshift         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define PRESENCE_bit    bits_byte, 0                                             E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define round00_bit     bits_byte, 1                                             E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define DSNext_bit      bits_byte, 2                                             E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define neg_temp_bit    bits_byte, 3                                             E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define DALLAS_BUS      PORTA, 4                                                 E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ROM_no          res     8                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           id_bit_number   res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           last_zero       res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           LastDiscrepancy res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           LastFamilyDiscr res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           id_bits_byte    res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           rom_mask        res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define id_bit          id_bits_byte, 0 ; first bit read in a search ID sequence E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define cmp_id_bit      id_bits_byte, 1 ; complement of id_bit                   E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define test_bit        id_bits_byte, 2 ; test id_bit & cmp_id_bit               E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define last_device     id_bits_byte, 6                                          E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define Direction       id_bits_byte, 7                                          E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                               include lm032l.inc                                                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               list                                                                         E:\prjPIC\prj_DS1820\searchV03\lm032l.inc
                                               include wait.inc                                                             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           #define         Nanosec         * D'1'                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           #define         Microsec        * D'1000'                                        E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           #define         Millisec        * D'1000000'                                     E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           #define         Seconds         * D'1000000000'                                  E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;**************************************************************                  E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;*                       The WAIT macro                       *                  E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;*                      * VERSION 1.01 *                      *                  E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;*             called by Wait <time>, lesscycles              *                  E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;**************************************************************                  E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;History                                                                         E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;1.00   - Original                                                               E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;1.01   - Fixed bug with small even numbers giving an error message              E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           Wait    macro   time_ns, lesscycles         ;time_ns gives the wait time required, in ns E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            radix dec                                                                       E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            variable instruct_time_ns =  (( 1 Seconds ) / (Clock_Freq / 4 ))                E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            local cycles                                                                    E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            variable cycles = ((time_ns) / instruct_time_ns)   ;required delay in           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                    ;100ths of instructions E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if (cycles < (lesscycles) )                                                     E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                   messg NOTE - negative delay time with lesscycles cycles (no code)        E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                           exitm                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            else                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            variable cycles = (cycles - (lesscycles))                                       E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if (cycles == 0)                                                                E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                   messg "WARNING - delay time less than 1 instructions"                    E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                           nop                                                              E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                           exitm                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if (cycles > (255*(256*3 + 6) + 2 + 3))                                         E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                   messg   "ERROR : Too long a wait for the WAIT macro at present!!"        E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                   exitm                                                                    E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;        messg Info - calculated number of cycles = #v(cycles)                   E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if (cycles > ((255*3)+5))                                                       E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
000118   302d     MOVLW     0x2d                           movlw   ((cycles-5)/(256*3+6))                                   E:\prjPIC\prj_DS1820\searchV03\wait.inc
000120   3005     MOVLW     0x5                                                                                             
00013a   3002     MOVLW     0x2                                                                                             
000119   2106     CALL      0x106                          call    longdelay                                                E:\prjPIC\prj_DS1820\searchV03\wait.inc
000121   2106     CALL      0x106                                                                                           
00013b   2106     CALL      0x106                                                                                           
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            ifndef INCLONGDELAY                                                             E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                             #define INCLONGDELAY                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            exitm                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if ((cycles > 8 ) && (cycles < (255*3 + 5)))                                    E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
000125   301f     MOVLW     0x1f                           movlw   ((cycles-5)/3)                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
00012a   301f     MOVLW     0x1f                                                                                            
000126   210d     CALL      0x10d                          call    shortdelay                                               E:\prjPIC\prj_DS1820\searchV03\wait.inc
00012b   210d     CALL      0x10d                                                                                           
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            ifndef INCSHORTDELAY                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                             #define INCSHORTDELAY                                                          E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            exitm                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if (cycles < 8)                                                                 E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            while  ( cycles > 1 )                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                           goto $+1  ;two cycle nop                                         E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           cycles -=2                                                                       E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endw                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if (cycles > 0)                                                                 E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                          nop                                                               E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            exitm                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            messg "ERROR - got to end of WAIT.MAC"                                          E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            radix hex                                                                       E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endm                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               errorlevel  -302            ;Eliminate bank warning                          E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           LCD_DATA         EQU     PORTB                                                   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           LCD_DATA_TRIS    EQU     TRISB                                                   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           LCD_CTRL         EQU     PORTB                                                   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           #define LED     PORTB, 0    ; LED - clear for lit, set for off                   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ; LCD Display Commands and Control Signal names.                                 E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           #define LCD_E    LCD_CTRL,1     ; LCD Enable control line                        E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           #define LCD_R_W  LCD_CTRL,2     ; LCD Read/Write control line                    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           #define LCD_RS   LCD_CTRL,3     ; LCD Register Select control line               E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               global DISPLAY_RESET, SEND_CHAR_W, SEND_CHAR, SEND_CMD_W                     E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               global LOAD_CGRAM, LOAD_CGRAM_LOC                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               extern longdelay, shortdelay    ;DELAY.ASM                                   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               extern uchars                   ;TEMPDEMO.ASM                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;                                                                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                            page                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;                                                                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ; Initilize the LCD Display Module                                               E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*                                                                               E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*              DISPLAY RESET                                                    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*                                                                               E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           PROG CODE                                                                        E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           DISPLAY_RESET                                                                    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;needs to have full routine to initialize corrupted display                      E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;first setup lcd port - all outputs                                              E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000111   1683     BSF       0x3,0x5            bsf     STATUS, RP0     ; Bank 1                                             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000112   3000     MOVLW     0x0                movlw   b'00000000'                                                          E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000113   0086     MOVWF     0x6                movwf   LCD_DATA_TRIS   ;set all to output                                   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000114   1283     BCF       0x3,0x5            bcf     STATUS, RP0     ; Bank 0                                             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000115   0186     CLRF      0x6                clrf    LCD_DATA        ;set all port low                                    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000116   1406     BSF       0x6,0x0            bsf LED                                                                      E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;clrf    LCDflags        ;set to cmd next etc                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;have to wait 15ms here                                                          E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000117   0064     CLRWDT                       clrwdt                                                                       E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               Wait    35 Millisec, 0                                                       E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00011a   0064     CLRWDT                       clrwdt                                                                       E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;clear LCD port to all low here!!!!!!!!!!!!!!!                                   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00011b   3031     MOVLW     0x31               movlw   b'00110001'     ; Command for 8-bit interface high nibble vv-B.0=1   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00011c   0086     MOVWF     0x6                movwf   LCD_DATA        ; ie 0011xxxx                                        E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00011d   1486     BSF       0x6,0x1            bsf     LCD_E                                                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00011e   0000     NOP                          nop                     ;incase the clk is >8MHz                             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;nop                     ;incase the clk is >16MHz                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00011f   1086     BCF       0x6,0x1            bcf     LCD_E                                                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;have to wait 4.1ms here                                                         E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               Wait    4100 Microsec, 0                                                     E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000122   1486     BSF       0x6,0x1            bsf     LCD_E           ;nibble is already setup                             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000123   0000     NOP                          nop                     ;incase the clk is >8MHz                             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;nop                     ;incase the clk is >16MHz                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000124   1086     BCF       0x6,0x1            bcf     LCD_E                                                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;have to wait 100us here                                                         E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               Wait    100 Microsec, 0                                                      E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000127   1486     BSF       0x6,0x1            bsf     LCD_E           ;nibble is already setup                             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000128   0000     NOP                          nop                     ;incase the clk is >8MHz                             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;nop                     ;incase the clk is >16MHz                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000129   1086     BCF       0x6,0x1            bcf     LCD_E                                                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;have to wait 100us here                                                         E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               Wait    100 Microsec, 0                                                      E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00012c   3021     MOVLW     0x21               movlw   b'00100001'     ; Command for 4-bit interface high nibble vv-B.0=1   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00012d   0086     MOVWF     0x6                movwf   LCD_DATA        ; ie 0010xxxx                                        E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00012e   1486     BSF       0x6,0x1            bsf     LCD_E                                                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00012f   0000     NOP                          nop                     ;incase the clk is >8MHz                             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;nop                     ;incase the clk is >16MHz                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000130   1086     BCF       0x6,0x1            bcf     LCD_E                                                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000131   0064     CLRWDT                       clrwdt                                                                       E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;from here interface is 4 bit and busy can be checked                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                       ;          001DL NF**                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000132   3028     MOVLW     0x28               movlw   FUNC_SET        ;has to be 0010  10XX                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000133   2150     CALL      0x150              call    SEND_CMD_W                                                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                       ;0000 1DCB                                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000134   3008     MOVLW     0x8                movlw   DISP_OFF        ;0000 1000                                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000135   2150     CALL      0x150              call    SEND_CMD_W                                                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;****************************                                                    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*                          *                                                    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*    INITIALIZE DISPLAY    *                                                    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*                          *                                                    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;****************************                                                    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           INIT_DISPLAY                                                                     E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000136   300c     MOVLW     0xc                movlw   DISP_ON         ; Display On, Cursor On                              E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000137   2150     CALL      0x150              call    SEND_CMD_W                                                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000138   3001     MOVLW     0x1                movlw   CLR_DISP        ; Clear the Display                                  E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000139   2150     CALL      0x150              call    SEND_CMD_W                                                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               Wait    2 Millisec, 0                                                        E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                       ;0000 01IS                                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00013c   3006     MOVLW     0x6                movlw   ENTRY_INC       ;0000 0110                                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00013d   2150     CALL      0x150              call    SEND_CMD_W                                                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00013e   0008     RETURN                       return                                                                       E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               page                                                                         E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*******************************************************************             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;* The LCD Module Subroutines                                      *             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*******************************************************************             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;                                                                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*******************************************************************             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*SendChar - Sends character to LCD                                *             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*This routine splits the character into the upper and lower       *             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*nibbles and sends them to the LCD, upper nibble first.           *             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*******************************************************************             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;                                                                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           SEND_CHAR_W                                                                      E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00013f   00a7     MOVWF     0x27               movwf   CHARBUF         ;Character to be sent is in W so put in              E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                       ;local CHARBUF                                       E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           SEND_CHAR                                                                        E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000140   215c     CALL      0x15c              call    BUSY_CHECK      ;Wait for LCD to be ready                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000141   0827     MOVF      0x27,0x0           movf    CHARBUF, W                                                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000142   39f0     ANDLW     0xf0               andlw   0x0F0           ;Get upper nibble into upper half port               E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000143   3801     IORLW     0x1                iorlw   0x01            ;vv-LED off                                          E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000144   0086     MOVWF     0x6                movwf   LCD_DATA        ;Send data to LCD                                    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;bcf     LCD_R_W         ;Set LCD to read                                    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000145   1586     BSF       0x6,0x3            bsf     LCD_RS          ;Set LCD to data mode                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000146   214c     CALL      0x14c              call    LCDtglclk       ;saving space - sod readability thou                 E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;bsf     LCD_E           ;toggle E for LCD                                   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;nop                     ;incase the clk is >8MHz                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;;nop                     ;incase the clk is >16MHz                          E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;bcf     LCD_E                                                               E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000147   0e27     SWAPF     0x27,0x0           swapf   CHARBUF, w                                                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000148   39f0     ANDLW     0xf0               andlw   0x0F0           ;Get lower nibble into upper half port               E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000149   3801     IORLW     0x1                iorlw   0x01            ;vv-LED off                                          E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00014a   0086     MOVWF     0x6                movwf   LCD_DATA        ;Send data to LCD                                    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00014b   1586     BSF       0x6,0x3            bsf     LCD_RS          ;Set LCD to data mode                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00014c   1486     BSF       0x6,0x1        LCDtglclk   bsf     LCD_E   ;toggle E for LCD                                    E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00014d   0000     NOP                                  nop             ;incase the clk is >8MHz                             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                       ;nop            ;incase the clk is >16MHz                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00014e   1086     BCF       0x6,0x1                    bcf     LCD_E                                                        E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00014f   0008     RETURN                               return                                                               E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*******************************************************************             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;* SEND_CMD - Sends command to LCD                                 *             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;* This routine splits the command into the upper and lower        *             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;* nibbles and sends them to the LCD, upper nibble first.          *             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*******************************************************************             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           SEND_CMD_W                                                                       E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000150   00a7     MOVWF     0x27               movwf   CHARBUF         ; Character to be sent is in W so put in             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                       ;local CHARBUF                                       E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           SEND_CMD                                                                         E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000151   215c     CALL      0x15c              call    BUSY_CHECK      ; Wait for LCD to be ready                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000152   0827     MOVF      0x27,0x0           movf    CHARBUF, W                                                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000153   39f0     ANDLW     0xf0               andlw   0x0F0           ; Get upper nibble into lower half port              E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000154   3801     IORLW     0x1                iorlw   0x01            ;vv-LED off                                          E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000155   0086     MOVWF     0x6                movwf   LCD_DATA        ; Send data to LCD                                   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;bcf     LCD_R_W         ; Set LCD to read                                   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;bcf     LCD_RS          ; Set LCD to command mode                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000156   214c     CALL      0x14c              call    LCDtglclk       ;saving space - sod readability thou                 E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;bsf     LCD_E           ; toggle E for LCD                                  E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;nop                     ;incase the clk is >8MHz                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;;nop                     ;incase the clk is >16MHz                          E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;bcf     LCD_E                                                               E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000157   0e27     SWAPF     0x27,0x0           swapf   CHARBUF,w                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000158   39f0     ANDLW     0xf0               andlw   0x0F0           ; Get lower nibble into lower half port              E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000159   3801     IORLW     0x1                iorlw   0x01            ;vv-LED off                                          E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00015a   0086     MOVWF     0x6                movwf   LCD_DATA        ; Send data to LCD                                   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00015b   294c     GOTO      0x14c              goto    LCDtglclk       ;saving space - sod readability thou                 E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;bsf     LCD_E           ; toggle E for LCD                                  E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;nop                     ;incase the clk is >8MHz                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;;nop                     ;incase the clk is >16MHz                          E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;bcf     LCD_E                                                               E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;return                                                                      E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*******************************************************************             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;* This routine checks the busy flag, returns when not busy        *             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;*******************************************************************             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ;                                                                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           BUSY_CHECK                                                                       E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00015c   1683     BSF       0x3,0x5            bsf     STATUS, RP0     ; Select Register page 1                             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00015d   30f0     MOVLW     0xf0               movlw   0xF0            ; st 0xF1 Set high nibble + keep INT for input       E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00015e   0086     MOVWF     0x6                movwf   LCD_DATA_TRIS                                                        E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00015f   1283     BCF       0x3,0x5            bcf     STATUS, RP0     ; Select Register page 0                             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000160   1186     BCF       0x6,0x3            bcf     LCD_RS          ; Set LCD for Command mode                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000161   1506     BSF       0x6,0x2            bsf     LCD_R_W         ; Setup to read busy flag                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000162   1486     BSF       0x6,0x1            bsf     LCD_E           ; Set E high                                         E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000163   0000     NOP                          nop                     ;incase the clk is >8MHz                             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;nop                     ;incase the clk is >16MHz                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000164   0806     MOVF      0x6,0x0            movf    LCD_DATA, W     ; Read upper nibble busy flag, DDRam address         E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000165   1086     BCF       0x6,0x1            bcf     LCD_E           ; Set E low                                          E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;andlw   0x0F0           ; Mask out lower nibble ***chng 1/10/96             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000166   3980     ANDLW     0x80               andlw   0x80            ; Mask out lower nibble ***chng 1/10/96              E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;movwf   TEMP                                                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000167   0000     NOP                          nop                                                                          E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000168   1486     BSF       0x6,0x1            bsf     LCD_E           ; Toggle E to get lower nibble                       E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000169   0000     NOP                          nop                                                                          E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00016a   0000     NOP                          nop                     ;incase the clk is >8MHz                             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;nop                     ;incase the clk is >16MHz                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;swapF   LCD_DATA, W     ; Read lower nibble DDRam address                   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00016b   1086     BCF       0x6,0x1            bcf     LCD_E                                                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;andlw   0x0F            ; Mask out upper nibble                             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;iorwf   TEMP, F         ; Combine nibbles                                   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00016c   3a80     XORLW     0x80               xorlw   0x80                                                                 E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00016d   1903     BTFSC     0x3,0x2            btfsc   STATUS, Z                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               ;btfsc   TEMP, 7         ; Check busy flag, high = busy                      E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00016e   295c     GOTO      0x15c              goto    BUSY_CHECK      ; If busy, check again                               E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00016f   1106     BCF       0x6,0x2            bcf     LCD_R_W                                                              E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000170   1683     BSF       0x3,0x5            bsf     STATUS, RP0     ; Select Register page 1                             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000171   3000     MOVLW     0x0                movlw   b'00000000'                                                          E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000172   0086     MOVWF     0x6                movwf   LCD_DATA_TRIS   ; Set for output                                     E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000173   1283     BCF       0x3,0x5            bcf     STATUS, RP0     ; Select Register page 0                             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000174   0008     RETURN                       return                                                                       E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           LOAD_CGRAM                                                                       E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ; load user defined characters                                                   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000175   3040     MOVLW     0x40               movlw   0x40                                                                 E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000176   2150     CALL      0x150              call    SEND_CMD_W                                                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ; start address passed in temp_lo (reuse temp_lo memory)                         E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ; running address in temp_hi (reuse temp_hi memory)                              E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           ; loop counter in acc_hi (reuse acc_hi memory)                                   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           LOAD_CGRAM_LOC                                                                   E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000177   01a8     CLRF      0x28               clrf    temp_hi                                                              E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000178   0829     MOVF      0x29,0x0           movf    temp_lo, W                                                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000179   07a8     ADDWF     0x28,0x1           addwf   temp_hi, F                                                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00017a   3008     MOVLW     0x8                movlw   0x08                                                                 E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00017b   00ab     MOVWF     0x2b               movwf   acc_hi                                                               E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                           load                                                                             E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00017c   0828     MOVF      0x28,0x0           movf    temp_hi, W                                                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00017d   2005     CALL      0x5                call    uchars                                                               E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00017e   213f     CALL      0x13f              call    SEND_CHAR_W                                                          E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
00017f   0aa8     INCF      0x28,0x1           incf    temp_hi, F                                                           E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000180   0bab     DECFSZ    0x2b,0x1           decfsz  acc_hi, F                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000181   297c     GOTO      0x17c               goto    load                                                                E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
000182   0008     RETURN                       return                                                                       E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               end                                                                          E:\prjPIC\prj_DS1820\searchV03\LM032L.asm
                                               list    p=16F628A                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               include P16F628A.inc                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                   LIST                                                                     C:\Program Files\MPLAB\MCHIP_Tools\P16F628A.inc
                                           ; P16F628A.INC  Standard Header File, Version 1.10    Microchip Technology, Inc. C:\Program Files\MPLAB\MCHIP_Tools\P16F628A.inc
                                                   LIST                                                                     C:\Program Files\MPLAB\MCHIP_Tools\P16F628A.inc
                                               include tempdemo.inc                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ;*                                                                          *    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ;*                   Dallas 1 Wire Bus Temperature demo                     *    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ;*                                                                          *    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           Clock_Freq      equ     d'4000000'      ;4MHz - for wait macro calculations      E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                               udata_ovr   0x20                    ;0x0C 16F84                              E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           DScommbuff      res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           DSCRC           res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           tempone         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           temptwo         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           count           res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           count2          res     1               ; 2nd loop counter for nested loops      E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           bits_byte       res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           CHARBUF         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           temp_hi         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           temp_lo         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           acc_lo          res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           acc_hi          res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           vvshift         res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define PRESENCE_bit    bits_byte, 0                                             E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define round00_bit     bits_byte, 1                                             E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define DSNext_bit      bits_byte, 2                                             E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define neg_temp_bit    bits_byte, 3                                             E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define DALLAS_BUS      PORTA, 4                                                 E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           ROM_no          res     8                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           id_bit_number   res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           last_zero       res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           LastDiscrepancy res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           LastFamilyDiscr res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           id_bits_byte    res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           rom_mask        res     1                                                        E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define id_bit          id_bits_byte, 0 ; first bit read in a search ID sequence E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define cmp_id_bit      id_bits_byte, 1 ; complement of id_bit                   E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define test_bit        id_bits_byte, 2 ; test id_bit & cmp_id_bit               E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define last_device     id_bits_byte, 6                                          E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                           #define Direction       id_bits_byte, 7                                          E:\prjPIC\prj_DS1820\searchV03\tempdemo.inc
                                               include dal_bus.inc                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                   list                                                                     E:\prjPIC\prj_DS1820\searchV03\dal_bus.inc
                                               include wait.inc                                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           #define         Nanosec         * D'1'                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           #define         Microsec        * D'1000'                                        E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           #define         Millisec        * D'1000000'                                     E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           #define         Seconds         * D'1000000000'                                  E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;**************************************************************                  E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;*                       The WAIT macro                       *                  E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;*                      * VERSION 1.01 *                      *                  E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;*             called by Wait <time>, lesscycles              *                  E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;**************************************************************                  E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;History                                                                         E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;1.00   - Original                                                               E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;1.01   - Fixed bug with small even numbers giving an error message              E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           Wait    macro   time_ns, lesscycles         ;time_ns gives the wait time required, in ns E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            radix dec                                                                       E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            variable instruct_time_ns =  (( 1 Seconds ) / (Clock_Freq / 4 ))                E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            local cycles                                                                    E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            variable cycles = ((time_ns) / instruct_time_ns)   ;required delay in           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                    ;100ths of instructions E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if (cycles < (lesscycles) )                                                     E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                   messg NOTE - negative delay time with lesscycles cycles (no code)        E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                           exitm                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            else                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            variable cycles = (cycles - (lesscycles))                                       E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if (cycles == 0)                                                                E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                   messg "WARNING - delay time less than 1 instructions"                    E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                           nop                                                              E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                           exitm                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if (cycles > (255*(256*3 + 6) + 2 + 3))                                         E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                   messg   "ERROR : Too long a wait for the WAIT macro at present!!"        E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                   exitm                                                                    E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           ;        messg Info - calculated number of cycles = #v(cycles)                   E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if (cycles > ((255*3)+5))                                                       E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                           movlw   ((cycles-5)/(256*3+6))                                   E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                           call    longdelay                                                E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            ifndef INCLONGDELAY                                                             E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                             #define INCLONGDELAY                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            exitm                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if ((cycles > 8 ) && (cycles < (255*3 + 5)))                                    E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                           movlw   ((cycles-5)/3)                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                           call    shortdelay                                               E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            ifndef INCSHORTDELAY                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                             #define INCSHORTDELAY                                                          E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            exitm                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if (cycles < 8)                                                                 E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            while  ( cycles > 1 )                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                           goto $+1  ;two cycle nop                                         E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                           cycles -=2                                                                       E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endw                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            if (cycles > 0)                                                                 E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                          nop                                                               E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endif                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            exitm                                                                           E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            messg "ERROR - got to end of WAIT.MAC"                                          E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            radix hex                                                                       E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                            endm                                                                            E:\prjPIC\prj_DS1820\searchV03\wait.inc
                                               include lm032l.inc                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               list                                                                         E:\prjPIC\prj_DS1820\searchV03\lm032l.inc
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;------defines for conditional assembly------                                    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;#define round00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;#define test                                                                    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;#define EEdsrom                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;#define dog                                                                     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               errorlevel  -302    ;Eliminate bank warning                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;CONFIG CODE                                                                     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #ifdef dog                                                                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               __config _BODEN_OFF & _CP_OFF& _DATA_CP_OFF & _PWRTE_ON & _WDT_ON  & _LVP_OFF & _MCLRE_ON & _XT_OSC E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               messg   "W   A   T   C   H__________D   O   G"                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #else                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
002007   3f21     ADDLW     0x21               __config _BODEN_OFF & _CP_OFF& _DATA_CP_OFF & _PWRTE_ON & _WDT_OFF & _LVP_OFF & _MCLRE_ON & _XT_OSC E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #endif  ; dog                                                                    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ; noexpand                                                                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*                                                                          *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*                   Dallas 1 Wire Bus Temperature demo                     *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*                                                                          *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;* This file and the resulting compiled code copyright1993-97 Steve Lawther *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*      Use of any of this code requires Steve Lawther to have a credit     *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*        within the source code. Commercial use of any of this code        *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*             requires permission of the author, Steve Lawther             *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*   For more details read 'README.TXT' or email 100255.157@compuserve.com  *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;* This outline requires IBM line draw chrs                                 *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*                             \/                                 *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*                   nc       ra2   ra1  spare                   (not )*    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*                   nc       ra3    ra0  led via resistor to +5V (used)*    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*         Dallas 1 wire bus  ra4ck osc1  \ Crystal 10MHz               *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*                  Vdd       mclr  osc2  /                             *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*                 ground     Vss    Vdd  +5V                           *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*                   nc       rb0int rb7 LCD data bit 7                 *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*             LCD cntrl E    rb1    rb6 LCD data bit 6                 *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*             LCD cntrl R/W  rb2    rb5 LCD data bit 5                 *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*             LCD cntrl RS   rb3    rb4 LCD data bit 4                 *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*                                                              *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*                                                                          *    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;History:-                                                                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;ver 0.01 - original version - raw data output                                   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;    0.10 - raw data + high resolution temperature                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;    0.11 - corrected one line (btfsc changed to btfss)                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #define LED     PORTB, 0    ; LED - clear for lit, set for off                   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               global uchars                                                                E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               extern DISPLAY_RESET, SEND_CHAR_W, SEND_CHAR, SEND_CMD_W    ;LM032CLK.ASM    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               extern LOAD_CGRAM, LOAD_CGRAM_LOC                           ;LM032CLK.ASM    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               extern DSReset_Pulse, DSWriteByteW, DSReadByte, DSReadBit   ;DAL_BUS.ASM     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               extern OWSearch                                             ;DAL_BUS.ASM     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               extern longdelay, shortdelay                                ;DELAY.ASM       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*                                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*   Start                                                                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*                                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           PROG CODE                                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           Begin                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000183   3007     MOVLW     0x7                movlw   0x07                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000184   009f     MOVWF     0x1f               movwf   CMCON                                                                E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000185   1683     BSF       0x3,0x5            bsf     STATUS, RP0     ; Bank 1                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000186   30ff     MOVLW     0xff               movlw   0xFF                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000187   0081     MOVWF     0x1                movwf   OPTION_REG                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000188   300f     MOVLW     0xf                movlw   b'00001111'                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000189   0085     MOVWF     0x5                movwf   TRISA           ; RA0-RA3 unused                                     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00018a   1283     BCF       0x3,0x5            bcf     STATUS, RP0     ; Bank 0                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00018b   0185     CLRF      0x5                clrf    PORTA           ; set all port low                                   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00018c   1683     BSF       0x3,0x5            bsf     STATUS, RP0     ; Bank 1                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00018d   3000     MOVLW     0x0                movlw   b'00000000'                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00018e   0086     MOVWF     0x6                movwf   TRISB           ;set all to output                                   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00018f   1283     BCF       0x3,0x5            bcf     STATUS, RP0     ; Bank 0                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000190   2111     CALL      0x111              call    DISPLAY_RESET                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;    call    LOAD_CGRAM      ; load user defined characters                      E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000191   01a6     CLRF      0x26               clrf    bits_byte                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           Start                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*                                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;* Main Code - get the ID and display it, then get the temp and display it       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;*                                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;****************************************************************************    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000192   3010     MOVLW     0x10               movlw   0x10                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000193   00a9     MOVWF     0x29               movwf   temp_lo                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000194   2175     CALL      0x175              call    LOAD_CGRAM      ; load user defined characters                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000195   3048     MOVLW     0x48               movlw   0x48                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000196   2150     CALL      0x150              call    SEND_CMD_W                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000197   3018     MOVLW     0x18               movlw   0x18                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000198   00a9     MOVWF     0x29               movwf   temp_lo                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000199   2177     CALL      0x177              call    LOAD_CGRAM_LOC  ; load user defined characters                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00019a   3050     MOVLW     0x50               movlw   0x50                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00019b   2150     CALL      0x150              call    SEND_CMD_W                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00019c   3020     MOVLW     0x20               movlw   0x20                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00019d   00a9     MOVWF     0x29               movwf   temp_lo                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00019e   2177     CALL      0x177              call    LOAD_CGRAM_LOC  ; load user defined characters                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00019f   3058     MOVLW     0x58               movlw   0x58                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001a0   2150     CALL      0x150              call    SEND_CMD_W                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001a1   3028     MOVLW     0x28               movlw   0x28                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001a2   00a9     MOVWF     0x29               movwf   temp_lo                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001a3   2177     CALL      0x177              call    LOAD_CGRAM_LOC  ; load user defined characters                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           NextTemp                                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001a4   01a6     CLRF      0x26               clrf    bits_byte                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ; skip ID Search if EEPROM is not empty                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001a5   0103     CLRW                         clrw                                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001a6   229d     CALL      0x29d              call    EEread                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001a7   3ed8     ADDLW     0xd8               addlw   (0 - 0x28)                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;    btfsc   STATUS, Z                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;     goto   EndSearch                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           StartNewSearch                                                                   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001a8   01b9     CLRF      0x39               clrf    id_bits_byte    ; last_device flag = 0                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001a9   01b7     CLRF      0x37               clrf    LastDiscrepancy                                                      E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001aa   01b8     CLRF      0x38               clrf    LastFamilyDiscr                                                      E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001ab   01a9     CLRF      0x29               clrf    temp_lo         ; EEPROM counter                                     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           OWReset                                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001ac   2047     CALL      0x47               call    DSReset_Pulse                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001ad   1406     BSF       0x6,0x0            bsf     LED                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;    Wait    197 Millisec, 0                                                     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001ae   1006     BCF       0x6,0x0            bcf     LED                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;    Wait    47 Millisec, 0                                                      E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #ifndef test                                                                     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001af   1c26     BTFSS     0x26,0x0           btfss   PRESENCE_bit    ; wait for a presence pulse                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001b0   29ac     GOTO      0x1ac               goto   OWReset                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001b1   1406     BSF       0x6,0x0            bsf LED                                                                      E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #endif                                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001b2   1b39     BTFSC     0x39,0x6           btfsc   last_device     ; check last_device flag                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001b3   29c3     GOTO      0x1c3               goto   EndSearch                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001b4   209e     CALL      0x9e               call    OWSearch        ; W = 1/W = 0 not/successful search                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001b5   39ff     ANDLW     0xff               andlw   0xFF            ; update STATUS, Z!                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001b6   1d03     BTFSS     0x3,0x2            btfss   STATUS, Z                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001b7   29a8     GOTO      0x1a8               goto   StartNewSearch                                                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ; write ID to EEPROM                                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001b8   3008     MOVLW     0x8                movlw   0x08                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001b9   00a4     MOVWF     0x24               movwf   count                                                                E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001ba   302d     MOVLW     0x2d               movlw   ROM_no                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001bb   0084     MOVWF     0x4                movwf   FSR                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           SaveROM_no                                                                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001bc   0800     MOVF      0x0,0x0            movf    INDF, W                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001bd   2288     CALL      0x288              call    EEwrite                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001be   0a84     INCF      0x4,0x1            incf    FSR, F                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001bf   0aa9     INCF      0x29,0x1           incf    temp_lo, F                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001c0   0ba4     DECFSZ    0x24,0x1           decfsz  count, F                                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001c1   29bc     GOTO      0x1bc               goto   SaveROM_no                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001c2   29ac     GOTO      0x1ac              goto    OWReset                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           EndSearch                                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #ifndef test                                                                     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001c3   2047     CALL      0x47               call    DSReset_Pulse                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001c4   1c26     BTFSS     0x26,0x0           btfss   PRESENCE_bit    ; wait for a presence pulse                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001c5   29c3     GOTO      0x1c3               goto   $-2                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #endif                                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001c6   30cc     MOVLW     0xcc               movlw   DSSkipROM                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001c7   2065     CALL      0x65               call    DSWriteByteW                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001c8   3044     MOVLW     0x44               movlw   DSConvertTemp   ; set all 1820s on converting                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001c9   2065     CALL      0x65               call    DSWriteByteW                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           tempnotready                                                                     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001ca   2074     CALL      0x74               call    DSReadBit                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001cb   1c20     BTFSS     0x20,0x0           btfss   DScommbuff, 0                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001cc   29ca     GOTO      0x1ca               goto   tempnotready                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001cd   3080     MOVLW     0x80               movlw   0x80            ; go to first line                                   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001ce   2150     CALL      0x150              call    SEND_CMD_W                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001cf   3001     MOVLW     0x1                movlw   0x01            ; 'lamp'                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001d0   213f     CALL      0x13f              call    SEND_CHAR_W                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001d1   0064     CLRWDT                       clrwdt                  ; allow LCD delay variation (BUSY_CHECK)!            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001d2   1683     BSF       0x3,0x5            bsf     STATUS, RP0     ; Bank 1                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001d3   30fd     MOVLW     0xfd               movlw   b'11111101'                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001d4   0081     MOVWF     0x1                movwf   OPTION_REG                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001d5   1283     BCF       0x3,0x5            bcf     STATUS, RP0     ; Bank 0                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #ifdef dog                                                                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               sleep                                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #endif  ; dog                                                                    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001d6   3080     MOVLW     0x80               movlw   0x80            ; go to first line                                   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001d7   2150     CALL      0x150              call    SEND_CMD_W                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001d8   3002     MOVLW     0x2                movlw   0x02            ; 'house'                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001d9   213f     CALL      0x13f              call    SEND_CHAR_W                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001da   1683     BSF       0x3,0x5            bsf     STATUS, RP0     ; Bank 1                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001db   30ff     MOVLW     0xff               movlw   0xFF                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001dc   0081     MOVWF     0x1                movwf   OPTION_REG                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001dd   1283     BCF       0x3,0x5            bcf     STATUS, RP0     ; Bank 0                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #ifndef test                                                                     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001de   2047     CALL      0x47               call    DSReset_Pulse                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001df   1c26     BTFSS     0x26,0x0           btfss   PRESENCE_bit    ; wait for a presence pulse                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001e0   29de     GOTO      0x1de               goto   $-2                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #endif                                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001e1   3055     MOVLW     0x55               movlw   DSMatchROM                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001e2   2065     CALL      0x65               call    DSWriteByteW                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;send dsrom1                                                                     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001e3   01ac     CLRF      0x2c               clrf    vvshift                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           dsload1                                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001e4   082c     MOVF      0x2c,0x0           movf    vvshift, W                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001e5   229d     CALL      0x29d              call    EEread                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001e6   2065     CALL      0x65               call    DSWriteByteW                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001e7   0aac     INCF      0x2c,0x1           incf    vvshift, F                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001e8   082c     MOVF      0x2c,0x0           movf    vvshift, W                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001e9   3ef8     ADDLW     0xf8               addlw   (0 - .8)                                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001ea   1d03     BTFSS     0x3,0x2            btfss   STATUS, Z                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001eb   29e4     GOTO      0x1e4               goto   dsload1                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001ec   29ff     GOTO      0x1ff              goto    DSGettemp                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           DSNext                                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001ed   30c0     MOVLW     0xc0               movlw   0xC0            ; go to second line                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001ee   2150     CALL      0x150              call    SEND_CMD_W                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001ef   3003     MOVLW     0x3                movlw   0x03            ; 'tree'                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001f0   213f     CALL      0x13f              call    SEND_CHAR_W                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #ifndef test                                                                     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001f1   2047     CALL      0x47               call    DSReset_Pulse                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001f2   1c26     BTFSS     0x26,0x0           btfss   PRESENCE_bit    ; wait for a presence pulse                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001f3   29f1     GOTO      0x1f1               goto   $-2                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #endif                                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001f4   3055     MOVLW     0x55               movlw   DSMatchROM                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001f5   2065     CALL      0x65               call    DSWriteByteW                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;send dsrom2                                                                     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           dsload2                                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001f6   082c     MOVF      0x2c,0x0           movf    vvshift, W                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001f7   229d     CALL      0x29d              call    EEread                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001f8   2065     CALL      0x65               call    DSWriteByteW                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001f9   0aac     INCF      0x2c,0x1           incf    vvshift, F                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001fa   082c     MOVF      0x2c,0x0           movf    vvshift, W                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001fb   3ef0     ADDLW     0xf0               addlw   (0 - .16)                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001fc   1d03     BTFSS     0x3,0x2            btfss   STATUS, Z                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001fd   29f6     GOTO      0x1f6               goto   dsload2                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001fe   1526     BSF       0x26,0x2           bsf     DSNext_bit                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           DSGettemp                                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0001ff   30be     MOVLW     0xbe               movlw   DSReadScratch                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000200   2065     CALL      0x65               call    DSWriteByteW                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000201   01a1     CLRF      0x21               clrf    DSCRC                                                                E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000202   2081     CALL      0x81               call    DSReadByte                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000203   0820     MOVF      0x20,0x0           movf    DScommbuff, W                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000204   00a9     MOVWF     0x29               movwf   temp_lo                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000205   2081     CALL      0x81               call    DSReadByte                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000206   0820     MOVF      0x20,0x0           movf    DScommbuff, W                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000207   00a8     MOVWF     0x28               movwf   temp_hi                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000208   2081     CALL      0x81               call    DSReadByte      ;read TH byte and dump                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000209   2081     CALL      0x81               call    DSReadByte      ;read TL byte and dump                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00020a   2081     CALL      0x81               call    DSReadByte      ;read config byte and dump                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00020b   2081     CALL      0x81               call    DSReadByte      ;read reserved byte and dump                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00020c   2081     CALL      0x81               call    DSReadByte      ;read reserved byte and dump                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00020d   2081     CALL      0x81               call    DSReadByte      ;read reserved byte and dump                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00020e   2081     CALL      0x81               call    DSReadByte      ;read CRC                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00020f   0820     MOVF      0x20,0x0           movf    DScommbuff, W                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;    call    HEXtoLCD                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000210   08a1     MOVF      0x21,0x1           movf    DSCRC, F                                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #ifdef test                                                                      E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               movlw   b'01011110';                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               movwf   temp_lo                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               movlw   b'11111111'                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               movwf   temp_hi                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               bsf     STATUS, Z                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #endif                                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;if there's a CRC error don't display temp, as gash data upsets the temp routines E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000211   1d03     BTFSS     0x3,0x2            btfss   STATUS, Z       ;corrected 31/07/98 (thanks Marco)                   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000212   2a36     GOTO      0x236               goto   no_displaytemp                                                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;positive or negative temp?                                                      E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000213   11a6     BCF       0x26,0x3           bcf     neg_temp_bit                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000214   1fa8     BTFSS     0x28,0x7           btfss   temp_hi,7                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000215   2a1c     GOTO      0x21c               goto   pos_num                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;it's a negative number so complement                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000216   09a9     COMF      0x29,0x1           comf    temp_lo, F                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000217   09a8     COMF      0x28,0x1           comf    temp_hi, F                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000218   0aa9     INCF      0x29,0x1           incf    temp_lo, F                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000219   1903     BTFSC     0x3,0x2            btfsc   STATUS, Z                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00021a   0aa8     INCF      0x28,0x1            incf   temp_hi, F                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00021b   15a6     BSF       0x26,0x3           bsf     neg_temp_bit                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           pos_num                                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;acc_lo = and(0xF0, temp_lo)                                                     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00021c   0829     MOVF      0x29,0x0           movf    temp_lo,W                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00021d   39f0     ANDLW     0xf0               andlw   0xF0                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00021e   00aa     MOVWF     0x2a               movwf   acc_lo                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;temp_hi = and(0x0F, temp_hi)                                                    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00021f   300f     MOVLW     0xf                movlw   0x0F                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000220   05a8     ANDWF     0x28,0x1           andwf   temp_hi,F                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;temp_hi = or(acc_lo, temp_hi)                                                   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000221   082a     MOVF      0x2a,0x0           movf    acc_lo, W                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000222   04a8     IORWF     0x28,0x1           iorwf   temp_hi, F                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;temp_hi = swap(temp_hi)                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000223   0ea8     SWAPF     0x28,0x1           swapf   temp_hi, F                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;temp_lo = and(0x0F, temp_lo)                                                    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000224   300f     MOVLW     0xf                movlw   0x0F                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000225   05a9     ANDWF     0x29,0x1           andwf   temp_lo, F                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;round up temp_lo                                                                E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000226   0829     MOVF      0x29,0x0           movf    temp_lo, W                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000227   00aa     MOVWF     0x2a               movwf   acc_lo  ;copy of temp_lo for round to 0.0                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #ifdef round00                                                                   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;round up temp_lo to 0.00                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               andlw   b'00000011'                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               movwf   acc_lo                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               sublw   b'00000010'                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               btfsc   STATUS, Z                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                bsf    round00_bit                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               movf    acc_lo, W                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               sublw   b'00000011'                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               btfsc   STATUS, Z                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                bsf    round00_bit                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #endif                                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;temp_lo calculate                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000228   0103     CLRW                         clrw                                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000229   1829     BTFSC     0x29,0x0           btfsc   temp_lo, 0                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00022a   3e06     ADDLW     0x6                 addlw  d'6'                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00022b   18a9     BTFSC     0x29,0x1           btfsc   temp_lo, 1                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00022c   3e0c     ADDLW     0xc                 addlw  d'12'                                                                E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00022d   1929     BTFSC     0x29,0x2           btfsc   temp_lo, 2                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00022e   3e19     ADDLW     0x19                addlw  d'25'                                                                E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00022f   19a9     BTFSC     0x29,0x3           btfsc   temp_lo, 3                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000230   3e32     ADDLW     0x32                addlw  d'50'                                                                E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000231   00a9     MOVWF     0x29               movwf   temp_lo                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #ifdef round00                                                                   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;round up temp_lo to 0.00                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               btfsc   round00_bit                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                incf   temp_lo, F                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               bcf     round00_bit                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #endif                                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #ifndef round00                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;round up temp_lo to 0.0                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000232   082a     MOVF      0x2a,0x0           movf    acc_lo, W                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000233   2036     CALL      0x36               call    round                                                                E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000234   07a9     ADDWF     0x29,0x1           addwf   temp_lo, F                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #endif                                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000235   224b     CALL      0x24b              call    displaytemp                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           no_displaytemp                                                                   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000236   08a1     MOVF      0x21,0x1           movf    DSCRC, F        ;check that the CRC is zero                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000237   3043     MOVLW     0x43               movlw   'C'             ;'C' if ok                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000238   1d03     BTFSS     0x3,0x2            btfss   STATUS, Z                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000239   3058     MOVLW     0x58               movlw   'X'             ;'cross' if not                                      E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00023a   213f     CALL      0x13f              call    SEND_CHAR_W                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;clear row                                                                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00023b   08a1     MOVF      0x21,0x1           movf    DSCRC, F        ;check that the CRC is zero                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00023c   1903     BTFSC     0x3,0x2            btfsc   STATUS, Z                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00023d   2a44     GOTO      0x244               goto   skip_clearRow                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00023e   3007     MOVLW     0x7                movlw   0x07                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00023f   00a5     MOVWF     0x25               movwf   count2          ;reuse location                                      E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           clearRow                                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000240   3020     MOVLW     0x20               movlw   ' '                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000241   213f     CALL      0x13f              call    SEND_CHAR_W                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000242   0ba5     DECFSZ    0x25,0x1           decfsz  count2, F                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000243   2a40     GOTO      0x240               goto   clearRow                                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           skip_clearRow                                                                    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000244   1d26     BTFSS     0x26,0x2           btfss   DSNext_bit                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000245   29ed     GOTO      0x1ed               goto   DSNext                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #ifndef test                                                                     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000246   3005     MOVLW     0x5                movlw   d'5' ;50 wait/5 sleep                                                E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000247   00a5     MOVWF     0x25               movwf   count2                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           waitloop                                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #ifdef dog                                                                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               sleep                                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #endif  ; dog                                                                    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;    Wait    197 Millisec, 0                                                     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000248   0ba5     DECFSZ    0x25,0x1           decfsz  count2, F                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000249   2a48     GOTO      0x248               goto   waitloop                                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #endif                                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00024a   29a4     GOTO      0x1a4              goto    NextTemp                                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;************************************************************************************* E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;                                                                                E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ; Converts temp in temp_hi, lo to ASCII characters in form +XXX.xx, & send to display E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;first sign bit                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           displaytemp                                                                      E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00024b   3020     MOVLW     0x20               movlw   ' '                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00024c   19a6     BTFSC     0x26,0x3           btfsc   neg_temp_bit                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00024d   302d     MOVLW     0x2d                movlw	 '-'                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00024e   213f     CALL      0x13f              call    SEND_CHAR_W                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00024f   3030     MOVLW     0x30               movlw   '0'                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000250   00a7     MOVWF     0x27               movwf   CHARBUF                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000251   0828     MOVF      0x28,0x0           movf    temp_hi, W                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000252   3e9c     ADDLW     0x9c               addlw   (0 - d'100')                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000253   1c03     BTFSS     0x3,0x0            btfss   STATUS, C                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000254   2a57     GOTO      0x257               goto   end_of_hund                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000255   0aa7     INCF      0x27,0x1           incf    CHARBUF, F                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000256   00a8     MOVWF     0x28               movwf   temp_hi                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           end_of_hund                                                                      E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;call    SEND_CHAR                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000257   3030     MOVLW     0x30               movlw   '0'                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000258   00a7     MOVWF     0x27               movwf   CHARBUF                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000259   0828     MOVF      0x28,0x0           movf    temp_hi, W                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           looptens                                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00025a   3ef6     ADDLW     0xf6               addlw   (0 - d'10')                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00025b   1c03     BTFSS     0x3,0x0            btfss   STATUS, C                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00025c   2a5f     GOTO      0x25f               goto   end_of_tens                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00025d   0aa7     INCF      0x27,0x1           incf    CHARBUF, F                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00025e   2a5a     GOTO      0x25a              goto    looptens                                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           end_of_tens ;W is now 10 below units figure                                      E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00025f   00a8     MOVWF     0x28               movwf   temp_hi                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;skip leading zero                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000260   3030     MOVLW     0x30               movlw   '0'                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000261   0627     XORWF     0x27,0x0           xorwf   CHARBUF, W                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000262   1d03     BTFSS     0x3,0x2            btfss   STATUS, Z                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000263   2a66     GOTO      0x266               goto   noskip                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000264   3020     MOVLW     0x20               movlw   ' '                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000265   00a7     MOVWF     0x27               movwf   CHARBUF                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           noskip                                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000266   2140     CALL      0x140              call    SEND_CHAR                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000267   0828     MOVF      0x28,0x0           movf    temp_hi, W                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000268   3e3a     ADDLW     0x3a               addlw   d'58'           ;to set to ASCII & correct for being 10 too low      E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000269   213f     CALL      0x13f              call    SEND_CHAR_W     ;saves needing a return                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00026a   302e     MOVLW     0x2e               movlw   '.'                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00026b   213f     CALL      0x13f              call    SEND_CHAR_W                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00026c   3030     MOVLW     0x30               movlw   '0'                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00026d   00a7     MOVWF     0x27               movwf   CHARBUF                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00026e   0829     MOVF      0x29,0x0           movf    temp_lo, W                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           looptenths                                                                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00026f   3ef6     ADDLW     0xf6               addlw   (0 - d'10')                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000270   1c03     BTFSS     0x3,0x0            btfss   STATUS, C                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000271   2a74     GOTO      0x274              goto    end_of_tenths                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000272   0aa7     INCF      0x27,0x1           incf    CHARBUF, F                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000273   2a6f     GOTO      0x26f              goto    looptenths                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           end_of_tenths   ;W is now 10 below hundredths figure                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000274   00a9     MOVWF     0x29               movwf   temp_lo                                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000275   2140     CALL      0x140              call    SEND_CHAR                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #ifdef round00                                                                   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               movf    temp_lo, W                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               addlw   d'58'           ;to set to ASCII & correct for being 10 too low      E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               call    SEND_CHAR_W     ;saves needing a return                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #endif                                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000276   3000     MOVLW     0x0                movlw   0x00            ; 'deg'                                              E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000277   213f     CALL      0x13f              call    SEND_CHAR_W                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000278   3400     RETLW     0x0                retlw   0                                                                    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;********************************************************************            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;* HEXtoLCD - Sends 2 digit hex to LCD                              *            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;* This routine splits the character into the upper and lower       *            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;* hex nibbles, and sends them to the LCD as ASCII characters       *            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;********************************************************************            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;Note that once a byte has been sent to the LCD, time is not a major factor      E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;as any subequent bytes sent have to wait til LCD not busy (>40us)               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           HEXtoLCD                                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;calculate the upper hex digit                                                   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000279   0e20     SWAPF     0x20,0x0           swapf   DScommbuff, W                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00027a   390f     ANDLW     0xf                andlw   b'00001111'                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00027b   3ef0     ADDLW     0xf0               addlw   -10         ;is it A to F hex                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00027c   1803     BTFSC     0x3,0x0            btfsc   STATUS, C                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00027d   3e07     ADDLW     0x7                 addlw  0x07        ;gap of seven between 9 and A                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00027e   3e58     ADDLW     0x58               addlw   58          ;set to correct ascii including the 10 took off before   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00027f   213f     CALL      0x13f              call    SEND_CHAR_W                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;calculate the lower hex digit                                                   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000280   0820     MOVF      0x20,0x0           movf    DScommbuff, W                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000281   390f     ANDLW     0xf                andlw   b'00001111'                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000282   3ef0     ADDLW     0xf0               addlw   -10         ;is it A to F hex                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000283   1803     BTFSC     0x3,0x0            btfsc   STATUS, C                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000284   3e27     ADDLW     0x27                addlw  0x27        ;gap of seven between 9 and a (lower case)               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000285   3e58     ADDLW     0x58               addlw   58          ;set to correct ascii including the 10 took off before   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000286   213f     CALL      0x13f              call    SEND_CHAR_W                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               ;movlw   ' '                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               ;call    SEND_CHAR_W                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000287   0008     RETURN                       return                                                                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           EEwrite                                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;    movf    temp_hi, W      ; the data is in W                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000288   1683     BSF       0x3,0x5            bsf     STATUS, RP0                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000289   009a     MOVWF     0x1a               movwf   EEDATA                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00028a   1283     BCF       0x3,0x5            bcf     STATUS, RP0                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00028b   0829     MOVF      0x29,0x0           movf    temp_lo, W                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00028c   1683     BSF       0x3,0x5            bsf     STATUS, RP0                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00028d   009b     MOVWF     0x1b               movwf   EEADR                                                                E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;    bcf     EECON1, EEPGD  ; for 18Fxxxx                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00028e   151c     BSF       0x1c,0x2           bsf     EECON1, WREN                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00028f   138b     BCF       0xb,0x7            bcf     INTCON, GIE                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000290   3055     MOVLW     0x55               movlw   0x55                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000291   009d     MOVWF     0x1d               movwf   EECON2                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000292   30aa     MOVLW     0xaa               movlw   0xAA                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000293   009d     MOVWF     0x1d               movwf   EECON2                                                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000294   149c     BSF       0x1c,0x1           bsf     EECON1, WR                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000295   111c     BCF       0x1c,0x2           bcf     EECON1, WREN                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;    btfsc   EECON1, WR                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000296   1283     BCF       0x3,0x5            bcf     STATUS, RP0                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000297   1f8c     BTFSS     0xc,0x7            btfss   PIR1, EEIF                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000298   2a97     GOTO      0x297               goto   $ - 1                                                                E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000299   138c     BCF       0xc,0x7            bcf     PIR1, EEIF                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00029a   178b     BSF       0xb,0x7            bsf     INTCON, GIE                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00029b   1283     BCF       0x3,0x5            bcf     STATUS, RP0                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00029c   0008     RETURN                       return                                                                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           EEread                                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ; the address is in W                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00029d   1683     BSF       0x3,0x5            bsf     STATUS, RP0                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00029e   009b     MOVWF     0x1b               movwf   EEADR                                                                E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;    bcf     EECON1, EEPGD  ; for 18Fxxxx                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00029f   141c     BSF       0x1c,0x0           bsf     EECON1, RD                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0002a0   081a     MOVF      0x1a,0x0           movf    EEDATA, W   ; read data is in W                                      E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0002a1   1283     BCF       0x3,0x5            bcf     STATUS, RP0                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0002a2   0008     RETURN                       return                                                                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           service                 ; Interrupt routine                                      E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0002a3   0000     NOP                          nop                 ; Interrupt code would go here                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0002a4   0000     NOP                          nop                                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
0002a5   0009     RETFIE                       retfie                                                                       E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           STARTUP CODE            ; This area is defined in 16f84a.lkr,                    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                   ; the linker script                                      E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000000   2983     GOTO      0x183              goto Begin          ; Jump to main code defined in Example.asm               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000001   0000     NOP                          nop                 ; Pad out so interrupt                                   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000002   0000     NOP                          nop                 ;  service routine gets                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000003   0000     NOP                          nop                 ;  put at address 0x0004.                                E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000004   2aa3     GOTO      0x2a3              goto service        ; Points to interrupt service routine                    E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #ifdef  EEdsrom                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           DEEPROM CODE                                                                     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ; in 286C 185F 0000 00A0                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               de      0x28                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               de      0x6C                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               de      0x18                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               de      0x5F                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               de      0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               de      0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               de      0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               de      0xA0                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ; out 284C 285F 0000 0092                                                        E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               de      0x28                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               de      0x4C                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               de      0x28                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               de      0x5F                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               de      0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               de      0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               de      0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               de      0x92                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #endif  ; EEdsrom                                                                E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           Table CODE 0x05                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000005   0782     ADDWF     0x2,0x1        uchars  addwf   PCL, F                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;'4'                                                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000006   3402     RETLW     0x2                retlw   0x02                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000007   3406     RETLW     0x6                retlw   0x06                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000008   340a     RETLW     0xa                retlw   0x0A                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000009   3412     RETLW     0x12               retlw   0x12                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00000a   341f     RETLW     0x1f               retlw   0x1F                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00000b   3402     RETLW     0x2                retlw   0x02                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00000c   3402     RETLW     0x2                retlw   0x02                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00000d   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;'5'                                                                             E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00000e   341f     RETLW     0x1f               retlw   0x1F                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00000f   3410     RETLW     0x10               retlw   0x10                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000010   341e     RETLW     0x1e               retlw   0x1E                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000011   3401     RETLW     0x1                retlw   0x01                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000012   3401     RETLW     0x1                retlw   0x01                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000013   3411     RETLW     0x11               retlw   0x11                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000014   340e     RETLW     0xe                retlw   0x0E                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000015   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;'deg'                                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000016   3406     RETLW     0x6                retlw   0x06                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000017   3406     RETLW     0x6                retlw   0x06                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000018   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000019   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00001a   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00001b   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00001c   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00001d   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;'lamp'                                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00001e   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00001f   3404     RETLW     0x4                retlw   0x04                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000020   340a     RETLW     0xa                retlw   0x0A                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000021   3415     RETLW     0x15               retlw   0x15                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000022   340a     RETLW     0xa                retlw   0x0A                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000023   3404     RETLW     0x4                retlw   0x04                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000024   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000025   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;'house'                                                                         E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000026   3404     RETLW     0x4                retlw   0x04                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000027   340e     RETLW     0xe                retlw   0x0E                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000028   341f     RETLW     0x1f               retlw   0x1F                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000029   3415     RETLW     0x15               retlw   0x15                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00002a   341f     RETLW     0x1f               retlw   0x1F                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00002b   3415     RETLW     0x15               retlw   0x15                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00002c   341f     RETLW     0x1f               retlw   0x1F                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00002d   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           ;'tree'                                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00002e   3404     RETLW     0x4                retlw   0x04                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00002f   340a     RETLW     0xa                retlw   0x0A                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000030   3415     RETLW     0x15               retlw   0x15                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000031   3415     RETLW     0x15               retlw   0x15                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000032   340e     RETLW     0xe                retlw   0x0E                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000033   3404     RETLW     0x4                retlw   0x04                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000034   340e     RETLW     0xe                retlw   0x0E                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000035   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #ifndef round00                                                                  E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000036   0782     ADDWF     0x2,0x1        round   addwf   PCL, F                                                           E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000037   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000038   340a     RETLW     0xa                retlw   0x0A                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000039   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00003a   340a     RETLW     0xa                retlw   0x0A                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00003b   340a     RETLW     0xa                retlw   0x0A                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00003c   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00003d   340a     RETLW     0xa                retlw   0x0A                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00003e   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
00003f   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000040   340a     RETLW     0xa                retlw   0x0A                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000041   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000042   340a     RETLW     0xa                retlw   0x0A                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000043   340a     RETLW     0xa                retlw   0x0A                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000044   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000045   340a     RETLW     0xa                retlw   0x0A                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
000046   3400     RETLW     0x0                retlw   0x00                                                                 E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #endif  ; round00                                                                E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                                                                                                            E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #ifdef  test                                                                     E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               messg   "T   E   S   T__________M   O   D   E"                               E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                           #endif  ; test                                                                   E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
                                               end                                                                          E:\prjPIC\prj_DS1820\searchV03\Tempdemo.asm
